{% extends "layout.html" %}
{% block title %}Direktori Pegawai - PA IKN{% endblock %}
{% block body_class %}page-public page-profil{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/profil.js') }}"></script>
{% endblock %}
{% block content %}
{% include "partials/header.html" %}
<div class="container text-center">
  <h2 class="d-inline-block mt-5 mb-4 pb-2 border-bottom border-warning text-uppercase fw-bold page-title-green">DAFTAR
    PEGAWAI & PEJABAT (LENGKAP)</h2>
  <input type="text" id="searchInput" class="form-control mx-auto mb-4 search-input"
    placeholder=" Cari Nama atau Jabatan...">
  <div class="card shadow rounded-3 overflow-hidden border-0">
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0" id="pegawaiTable">
        <thead>
          <tr>
            <th width="5%">No</th>
            <th width="10%" class="text-center">Foto</th>
            <th width="30%">Nama Lengkap & Gelar</th>
            <th width="20%">NIP</th>
            <th width="35%">Jabatan (Role)</th>
          </tr>
        </thead>
        <tbody>
          {% for p in pegawai %}
          <tr>
            <td>{{ loop.index }}</td>
            <td class="text-center">
              {% if p['pas_foto'] %}
              <img src="/uploads/{{ p['pas_foto'] }}" class="avatar" alt="Foto {{ p['nama_lengkap'] }}" loading="lazy">
              {% else %}
              <img src="https://i.pravatar.cc/150?u={{ p['nip']|urlencode }}" class="avatar" alt="No Photo"
                loading="lazy">
              {% endif %}
            </td>
            <td class="fw-bold text-start ps-4">{{ p['nama_lengkap'] }}</td>
            <td>{{ p['nip'] }}</td>
            <td>
              {% if p['role'] == 'ketua' %}
              <span class="badge bg-danger p-2">KETUA PENGADILAN</span>
              {% elif p['role'] == 'wakil_ketua' %}
              <span class="badge bg-danger p-2">WAKIL KETUA</span>
              {% elif 'hakim' in p['role'] %}
              <span class="badge bg-success p-2">HAKIM</span>
              {% elif p['role'] == 'panitera' %}
              <span class="badge bg-warning text-dark p-2">PANITERA</span>
              {% elif p['role'] == 'sekretaris' %}
              <span class="badge bg-warning text-dark p-2">SEKRETARIS</span>
              {% elif p['role'] == 'kassubag' %}
              <span class="badge bg-info text-dark p-2">KASSUBAG</span>
              {% elif p['role'] == 'admin_it' %}
              <span class="badge bg-dark p-2">TIM IT</span>
              {% elif p['role'] == 'staff' %}
              <span class="badge bg-primary p-2">STAFF PELAYANAN</span>
              {% else %}
              <span class="badge bg-secondary p-2">{{ p['role']|upper }}</span>
              {% endif %}
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="5" class="text-center py-4">Data pegawai belum tersedia.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <div class="mt-4 text-muted">
    <small>Total Pegawai: <strong>{{ pegawai|length }}</strong> orang</small>
  </div>
</div>
{% include "partials/footer.html" %}
{% endblock %}