{% set page_head %}{% block head_extra %}{% endblock %}{% endset %}
{% set page_content %}{% block content %}{% endblock %}{% endset %}
{% set page_scripts %}{% block scripts %}{% endblock %}{% endset %}
{% set body_class %}{% block body_class %}{% endblock %}{% endset %}
{% set body_style %}{% block body_style %}{% endblock %}{% endset %}

{% if request.headers.get('HX-Request') %}
<div id="htmx-meta" data-body-class="{{ body_class|trim }}" data-body-style="{{ body_style|trim }}"
  style="display:none"></div>
{{ page_head }}
{{ page_content }}
{{ page_scripts }}
{% else %}
<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <title>{% block title %}Sistem Informasi PA IKN{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
  {{ page_head }}
</head>

<body class="{{ body_class|trim }}" data-body-style="{{ body_style|trim }}">
  <main id="app" hx-boost="true" hx-target="#app" hx-swap="innerHTML" hx-push-url="true">
    {{ page_content }}
  </main>
  <div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3">
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
    {% for category, message in messages %}
    {% set bg = 'success' if category == 'success' else 'danger' if category == 'error' else 'warning' if category ==
    'warning' else 'info' %}
    <div class="toast align-items-center text-bg-{{ bg }} border-0 mb-2" role="alert" aria-live="assertive"
      aria-atomic="true" data-bs-delay="4000">
      <div class="d-flex">
        <div class="toast-body">{{ message }}</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/ws.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  {{ page_scripts }}
</body>

</html>
{% endif %}